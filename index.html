<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ummeats | TAMU EXPRESS Orders & Feedback</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
<marquee
  behavior="scroll"
  direction="left"
  scrollamount="6"
  class="bg-red-600 text-white font-semibold py-3 px-4 mt-2 rounded shadow mx-4"
>
  ‚ö†Ô∏è IMPORTANT NOTICE:
  Orders above KSh 400 attract a service fee of KSh 60.
  No morning orders are accepted.
  Lunch orders are accepted from 11:30 AM ‚Äì 2:00 PM.
  Evening orders are accepted from 4:00 PM ‚Äì 8:00 PM.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kindly be adviced that if ordered food is not available,you're requested to browse and look for other replacemet or cantact customer care (0115613332).
  All confirmed orders will be delivered.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚ÄúRamadhan is almost here! We are happy to inform everyone that vouchers for both morning and evening orders are now available at only KES 1,500. Karibuni sana as we prepare for this blessed month. We wish you all a peaceful and successful Ramadhan. For more information, please contact our customer care team on 0115613332 / 0116860686.‚Äù
</marquee>



  

<div class="flex min-h-screen">

  <!-- LEFT MENU -->
  <aside class="w-1/4 bg-green-700 text-white p-6">
    <h1 class="text-3xl font-bold mb-4">ü•© Ummeats</h1>
    <p class="text-green-100 text-sm mb-6">Local Kibanda,shops Orders + Feedback</p>

    <button id="feedbackBtn" class="block bg-white text-green-700 text-center py-2 rounded font-bold mb-6 w-full">
      üí¨ Feedback
    </button>

<button id="backBtn" class="block bg-white text-green-700 text-center py-2 rounded font-bold mb-6 w-full">
  üîô Back to Ummeats
</button>

<script>
  document.getElementById("backBtn").addEventListener("click", () => {
    window.location.href = "https://purinekaka70-svg.github.io/Ummeats/";
  });
</script>




    


    <hr class="my-6 border-green-400">
    <p class="text-sm">Add shop/kibanda, add multiple items, submit Mpesa ref. Customers manage own orders.</p>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="w-3/4 p-6 space-y-10">

    <!-- ORDER FORM -->
    <section id="orderSection" class="bg-white p-6 rounded-xl shadow-lg max-w-xl">
      <h2 class="text-2xl font-bold mb-4">üõí Place Your Order</h2>

      <input id="customerName" class="w-full border p-2 rounded mb-3" placeholder="Your Name">
      <input id="customerEmail" class="w-full border p-2 rounded mb-3" placeholder="Your Email">
      <input id="shopName" class="w-full border p-2 rounded mb-3" placeholder="Shop / Kibanda">

      <div class="flex gap-2 mb-3">
        <input id="itemName" class="w-2/3 border p-2 rounded" placeholder="Item name">
        <input id="itemQty" class="w-1/3 border p-2 rounded" placeholder="Qty">
      </div>

      <button id="addItemBtn" class="w-full bg-green-600 text-white py-2 rounded font-bold mb-4">‚ûï Add Item</button>

      <ul id="itemsList" class="list-disc pl-6 mb-4 text-gray-700"></ul>

      <input id="totalAmount" class="w-full border p-2 rounded mb-3" placeholder="Estimated / Real Amount (KES)">
      <input id="mpesaCode" class="w-full border p-2 rounded mb-3" placeholder="Mpesa Transaction Code">

      <button id="submitOrderBtn" class="w-full bg-green-700 text-white py-2 rounded font-bold">Submit Full Order </button>
      <p id="orderStatus" class="mt-3 font-semibold"></p>
    </section>

    <!-- CUSTOMER ORDERS PANEL -->
    <section id="customerSection" class="bg-white p-6 rounded-xl shadow-lg">
      <h2 class="text-xl font-bold mb-3">Your Orders</h2>
      <div id="customerOrders" class="space-y-3"></div>
    </section>

    <!-- FEEDBACK SECTION -->
    <section id="feedbackSection" class="hidden bg-white p-6 rounded-xl shadow-lg max-w-xl">
      <h2 class="text-2xl font-bold mb-4"> Feedback</h2>

      <input id="fbName" class="w-full border p-2 rounded mb-3" placeholder="Your Name">
      <input id="fbEmail" class="w-full border p-2 rounded mb-3" placeholder="Your Email">
      <textarea id="fbMessage" class="w-full border p-2 rounded mb-3" placeholder="Write your feedback here..." rows="4"></textarea>
      <button id="submitFeedbackBtn" class="w-full bg-blue-600 text-white py-2 rounded font-bold">Submit Feedback</button>
      <p id="fbStatus" class="mt-3 font-semibold"></p>
    </section>

    <!-- ADMIN PANEL -->
    <section id="adminPanel" class="hidden bg-black text-white p-6 rounded-xl">
      <h2 class="text-xl font-bold mb-4">üîí Admin Panel</h2>
      <div id="adminOrders" class="space-y-3"></div>
      <div id="adminFeedbacks" class="space-y-3 mt-6"></div>
    </section>

  </main>
</div>

<footer id="footerTrigger" class="text-center bg-gray-300 py-3 cursor-pointer">
  ¬© 2026 Ummeats ‚Äî Click 4 times for Admin
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyApi2RjwEXEW2mTwCMiYERKUNAYL8Toddk",
  authDomain: "tamuexpress-26e4a.firebaseapp.com",
  projectId: "tamuexpress-26e4a",
  storageBucket: "tamuexpress-26e4a.appspot.com",
  messagingSenderId: "202068792631",
  appId: "1:202068792631:web:8a9b97028ebd7a45af76b2"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ordersCollection = collection(db,"orders");
const feedbackCollection = collection(db,"feedbacks");

// Elements
const feedbackBtn = document.getElementById("feedbackBtn");
const feedbackSection = document.getElementById("feedbackSection");
const orderSection = document.getElementById("orderSection");
const customerSection = document.getElementById("customerSection");

const submitFeedbackBtn = document.getElementById("submitFeedbackBtn");
const fbStatus = document.getElementById("fbStatus");

// Toggle feedback section
feedbackBtn.addEventListener("click",()=>{
  feedbackSection.classList.remove("hidden");
  orderSection.classList.add("hidden");
  customerSection.classList.add("hidden");
});

// Submit Feedback
submitFeedbackBtn.addEventListener("click", async()=>{
  const name = document.getElementById("fbName").value;
  const email = document.getElementById("fbEmail").value;
  const message = document.getElementById("fbMessage").value;

  if(!name||!email||!message){ alert("Fill all fields"); return; }

  try{
    await addDoc(feedbackCollection,{name,email,message,time:new Date()});
    fbStatus.textContent=" Feedback submitted!";
    fbStatus.className="text-green-600 font-bold";
    document.getElementById("fbName").value="";
    document.getElementById("fbEmail").value="";
    document.getElementById("fbMessage").value="";
  }catch(err){ console.log(err); fbStatus.textContent="Error"; fbStatus.className="text-red-600 font-bold"; }
});
</script>
</body>
</html>
